```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EXPENZO - Smart Spending, Brighter Future</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600;700&display=swap" rel="stylesheet"> <!-- Added Segoe UI for Pro section -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* --- Main App Styles --- */
        :root {
            --primary-color: #6c63ff; /* Main App Primary */
            --secondary-color: #4dabf7;
            --accent-color: #ff6b6b;
            --dark-color: #2b2d42;
            --light-color: #f8f9fa; /* Main App Light Background */
            --gradient-1: linear-gradient(135deg, #6c63ff 0%, #4dabf7 100%);
            --gradient-2: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%);
            --transition: all 0.4s cubic-bezier(0.645, 0.045, 0.355, 1);
            --sidebar-width: 250px;
            --card-radius: 12px;
            --positive-color: #10b981; /* Tailwind Green 500 */
            --negative-color: #ef4444; /* Tailwind Red 500 */
            --edit-color: #3b82f6; /* Tailwind Blue 500 */
            --delete-color: #ef4444; /* Tailwind Red 500 */
            --neutral-color: #6b7280; /* Tailwind Gray 500 */
            --danger-color: var(--negative-color);
            --danger-color-light: rgba(239, 68, 68, 0.1);

            /* --- Pro Section Variables (scoped with #expenzo-pro where needed) --- */
            --pro-primary: #6c5ce7;
            --pro-primary-dark: #5649c0;
            --pro-secondary: #00cec9;
            --pro-dark: #2d3436;
            --pro-light: #f5f6fa; /* Pro Section Light Background */
            --pro-success: #00b894;
            --pro-warning: #fdcb6e;
            --pro-danger: #d63031;
            --pro-gradient: linear-gradient(135deg, #6c5ce7 0%, #00cec9 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            /* Default font for main app */
            font-family: 'Poppins', sans-serif;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background-color: #f5f7fa; /* Use main app's light */
            color: var(--dark-color);
            overflow-x: hidden;
        }

        /* Preloader */
        .preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-1);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .logo-container {
            text-align: center;
            animation: fadeInUp 1s ease;
        }

        .logo-container .logo {
            font-size: 4rem;
            font-weight: 700;
            color: white;
            display: block;
            margin-bottom: 1rem;
            letter-spacing: 2px;
        }

        .logo-container .tagline {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
            text-transform: uppercase;
            letter-spacing: 3px;
            font-weight: 300;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 1.5rem 0;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
            transition: padding 0.3s ease, box-shadow 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }

        .nav ul {
            display: flex;
            list-style: none;
        }

        .nav ul li {
            margin-left: 2rem;
        }

        .nav ul li a {
            text-decoration: none;
            color: var(--dark-color);
            font-weight: 500;
            transition: var(--transition);
            position: relative;
            cursor: pointer;
            padding-bottom: 5px;
        }

        .nav ul li a.active,
        .nav ul li a:hover {
            color: var(--primary-color);
        }

        .nav ul li a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--primary-color);
            transition: width 0.3s ease;
        }

        .nav ul li a.active::after,
        .nav ul li a:hover::after {
            width: 100%;
        }

        .auth-buttons button {
            padding: 0.6rem 1.5rem;
            border-radius: 50px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            margin-left: 1rem;
            border: none;
        }

        .login-btn {
            background-color: transparent;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
        }

        .login-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .signup-btn {
            background-color: var(--primary-color);
            color: white;
        }

        .signup-btn:hover {
            background-color: #5a52e0;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(108, 99, 255, 0.3);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .username {
            font-weight: 500;
        }

        .avatar {
            width: 40px;
            height: 40px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            text-transform: uppercase;
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding-top: 80px;
            overflow: hidden;
        }

        .hero .container {
            display: flex;
            align-items: center;
            width: 100%;
            gap: 3rem;
            position: relative;
            z-index: 1;
        }

        .hero-content {
            max-width: 600px;
            flex: 1;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        .highlight {
            background: var(--gradient-1);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .hero-content .tagline {
            font-size: 1.2rem;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            letter-spacing: 1px;
            font-weight: 500;
        }

        .hero-content .description {
            font-size: 1.1rem;
            color: #495057;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .cta-btn {
            padding: 1rem 2.5rem;
            background: var(--gradient-1);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 10px 20px rgba(108, 99, 255, 0.2);
        }

        .cta-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(108, 99, 255, 0.3);
        }

        .hero-image {
            position: relative;
            width: 45%;
            height: 500px;
            flex-shrink: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .gradient-circle {
            position: absolute;
            border-radius: 50%;
            filter: blur(70px);
            opacity: 0.6;
            animation: float 10s ease-in-out infinite alternate;
            z-index: 0;
        }

        .gradient-circle:nth-child(1) {
            width: 450px;
            height: 450px;
            background: var(--gradient-1);
            top: 20%;
            left: 10%;
            animation-duration: 9s;
        }

        .gradient-circle:nth-child(2) {
            width: 350px;
            height: 350px;
            background: var(--gradient-2);
            bottom: 15%;
            right: 5%;
            animation-duration: 11s;
            animation-delay: 0.5s;
        }

        /* Bank Details Section */
        .bank-details {
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding-top: 80px;
            position: relative;
            overflow: hidden;
        }

        .bank-details .container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            gap: 3rem;
            z-index: 1;
        }

        .bank-form-container {
            flex: 1;
            max-width: 500px;
            background-color: white;
            padding: 2.5rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .bank-form-container h2 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .subtitle {
            color: var(--dark-color);
            margin-bottom: 2rem;
            font-size: 1rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark-color);
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
            background-color: #fdfdfd;
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.2);
            outline: none;
            background-color: white;
        }

        .form-group input:invalid,
        .form-group select:invalid {
            border-color: var(--accent-color);
        }
        .form-group input:focus:invalid,
        .form-group select:focus:invalid {
             box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.2);
        }

        .hint {
            font-size: 0.8rem;
            color: #6c757d;
            margin-top: 0.3rem;
        }

        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: var(--gradient-1);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            margin-top: 1rem;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(108, 99, 255, 0.3);
        }

        .alternative-option {
            margin-top: 2rem;
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #e9ecef;
        }

        .ntl-btn {
            width: 100%;
            padding: 1rem;
            background: transparent;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .ntl-btn:hover {
            background-color: rgba(108, 99, 255, 0.1);
        }

        .ntl-description {
            font-size: 0.8rem;
            color: #6c757d;
            margin-top: 0.5rem;
        }

        .bank-image {
            position: absolute;
            top: 50%;
            right: 5%;
            transform: translateY(-50%);
            z-index: 0;
            opacity: 0.08;
            filter: blur(10px);
            pointer-events: none;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 45%;
            max-width: 550px;
        }

        .security-icon {
            width: 100%;
            height: auto;
            max-width: 400px;
        }

        /* Dashboard Styles */
        .dashboard-container {
            display: flex;
            margin-top: 80px;
            min-height: calc(100vh - 80px);
        }

        .sidebar {
            width: var(--sidebar-width);
            background-color: white;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
            padding: 2rem 0;
            position: fixed;
            top: 80px;
            left: 0;
            height: calc(100vh - 80px);
            overflow-y: auto;
            z-index: 90;
            transition: width 0.3s ease;
        }

        .sidebar-menu {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .menu-item {
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            transition: background-color 0.2s ease, color 0.2s ease, border-left-color 0.2s ease;
            border-left: 4px solid transparent;
            color: var(--dark-color);
            text-decoration: none;
            white-space: nowrap;
        }

        .menu-item.active,
        .menu-item:hover {
            background-color: rgba(108, 99, 255, 0.08);
            border-left-color: var(--primary-color);
            color: var(--primary-color);
        }

        .menu-item i {
            width: 24px;
            text-align: center;
            font-size: 1.1rem;
            flex-shrink: 0;
        }
        /* Star icon specific style */
        .menu-item i.fa-star {
            color: #fdcb6e; /* Gold color for Pro star */
        }
        .menu-item.active i.fa-star,
        .menu-item:hover i.fa-star {
            color: #e1b12c; /* Darker gold on hover/active */
        }

        .menu-item span {
            font-weight: 500;
            transition: opacity 0.2s ease;
        }

        .dashboard-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 2rem;
            background-color: #f5f7fa;
            transition: margin-left 0.3s ease;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .dashboard-header h1 {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--dark-color);
        }

        .date-filter {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            border: 1px solid #e0e0e0;
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .summary-card {
            background-color: white;
            border-radius: var(--card-radius);
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03);
            border: 1px solid #f0f0f0;
            transition: var(--transition);
        }

        .summary-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.07);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-header h3 {
            font-size: 1rem;
            font-weight: 500;
            color: #6b7280;
        }

        .card-header i {
            color: var(--primary-color);
            font-size: 1.2rem;
        }

        .card-body h2 {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            word-wrap: break-word;
            color: var(--dark-color);
        }

        .main-content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            grid-template-areas: "chart categories";
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .chart-container { grid-area: chart; }
        .categories-card { grid-area: categories; }

        .chart-container,
        .categories-card {
            background-color: white;
            border-radius: var(--card-radius);
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03);
            border: 1px solid #f0f0f0;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .chart-header h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark-color);
        }

        .chart-legend {
            display: flex;
            gap: 1rem;
            font-size: 0.9rem;
        }

        .chart-legend i { margin-right: 0.3rem; }
        .legend-income { color: var(--positive-color); }
        .legend-expense { color: var(--negative-color); }

        .chart-placeholder {
            position: relative;
            height: 300px;
            width: 100%;
        }

        .categories-card .card-header h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--dark-color);
        }
        .categories-card .card-header { margin-bottom: 0.5rem; }
        .categories-card .card-body {
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .no-data {
            color: #9ca3af;
            font-size: 0.9rem;
            text-align: center;
            padding: 1rem;
            font-style: italic;
        }
        .chart-placeholder .no-data {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            display: none;
        }

        /* Transactions Section */
        #transactionsSection {
            background-color: white;
            border-radius: var(--card-radius);
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03);
            border: 1px solid #f0f0f0;
        }
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        .section-header h2 {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--dark-color);
        }
        .add-transaction-btn {
            padding: 0.7rem 1.5rem;
            background: var(--gradient-1);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        .add-transaction-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(108, 99, 255, 0.3);
        }
        .transactions-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            max-height: 500px;
            overflow-y: auto;
            padding-right: 0.5rem;
            min-height: 100px;
        }
        .transactions-list::-webkit-scrollbar { width: 6px; }
        .transactions-list::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 3px;}
        .transactions-list::-webkit-scrollbar-thumb { background: #ccc; border-radius: 3px;}
        .transactions-list::-webkit-scrollbar-thumb:hover { background: #aaa; }

        .transaction-item {
            display: flex;
            align-items: center;
            padding: 0.8rem 1rem;
            border-radius: 8px;
            transition: background-color 0.2s ease;
            border-bottom: 1px solid #f0f0f0;
        }
        .transaction-item:last-child { border-bottom: none; }
        .transaction-item:hover { background-color: #f9fafb; }
        .transaction-icon {
            width: 40px;
            height: 40px;
            background-color: rgba(108, 99, 255, 0.1);
            color: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            font-size: 1rem;
            flex-shrink: 0;
        }
        .transaction-details {
            flex: 1;
            margin-right: 1rem;
            overflow: hidden;
        }
        .transaction-details h4 {
            font-weight: 500;
            margin-bottom: 0.2rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: var(--dark-color);
        }
        .transaction-details p {
            font-size: 0.8rem;
            color: #6b7280;
        }
        .transaction-amount {
            font-weight: 600;
            white-space: nowrap;
            margin-left: auto;
            padding-left: 1rem;
            flex-shrink: 0;
        }
        .transaction-amount.positive { color: var(--positive-color); }
        .transaction-amount.negative { color: var(--negative-color); }

        /* Budget Section */
        #budgetsSection {
            background-color: white;
            border-radius: var(--card-radius);
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03);
            border: 1px solid #f0f0f0;
        }
        .budget-filters {
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background-color: #f9fafb;
            padding: 0.75rem 1rem;
            border-radius: 8px;
        }
        .budget-filters label { font-weight: 500; color: var(--dark-color); }
        .budget-filters select {
            padding: 0.5rem 0.8rem; border: 1px solid #e0e0e0; border-radius: 6px;
            font-size: 0.9rem; background-color: white; cursor: pointer;
        }
        .budget-chart-container {
            margin-bottom: 2rem; background-color: #fdfdfd; padding: 1.5rem;
            border-radius: var(--card-radius); border: 1px solid #f0f0f0;
        }
        .budget-chart-placeholder { height: 350px; }
        .budget-transaction-history h3 {
            font-size: 1.2rem; font-weight: 600; color: var(--dark-color);
            margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid #eee;
        }
        .transaction-actions {
            display: flex; gap: 0.8rem; margin-left: 1rem; flex-shrink: 0;
        }
        .action-btn {
            background: none; border: none; cursor: pointer; font-size: 0.9rem;
            padding: 0.2rem; transition: color 0.2s ease, transform 0.2s ease;
            color: var(--neutral-color);
        }
        .action-btn.edit-btn { color: var(--edit-color); }
        .action-btn.delete-btn { color: var(--delete-color); }
        .action-btn:hover { transform: scale(1.1); }
        .action-btn.edit-btn:hover { color: #2563eb; }
        .action-btn.delete-btn:hover { color: #dc2626; }
        #budgetTransactionsListContainer .transaction-item { justify-content: space-between; }
        #budgetTransactionsListContainer .transaction-details { flex-grow: 1; flex-shrink: 1; }
        #budgetTransactionsListContainer .transaction-amount { margin-left: 0; }

        /* Modal Styles */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.6); z-index: 1000; justify-content: center;
            align-items: center; backdrop-filter: blur(5px); opacity: 0; transition: opacity 0.3s ease;
        }
        .modal.active { display: flex; opacity: 1; }
        .modal-content {
            background-color: white; padding: 2rem; border-radius: 12px; width: 100%;
            max-width: 500px; box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(-20px); opacity: 0; transition: transform 0.3s ease, opacity 0.3s ease;
        }
        .modal.active .modal-content { transform: translateY(0); opacity: 1; }
        .modal-header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;
            border-bottom: 1px solid #e9ecef; padding-bottom: 1rem;
        }
        .modal-header h2 { font-size: 1.5rem; font-weight: 600; color: var(--primary-color); }
        .close-btn {
            background: none; border: none; font-size: 1.8rem; color: #9ca3af;
            cursor: pointer; transition: var(--transition); line-height: 1;
        }
        .close-btn:hover { color: var(--dark-color); transform: rotate(90deg); }
        .modal .form-group { margin-bottom: 1.5rem; }
        .modal .form-group label { display: block; margin-bottom: 0.5rem; font-weight: 500; }
        .modal .form-group input, .modal .form-group select {
            width: 100%; padding: 0.8rem 1rem; border: 1px solid #e0e0e0; border-radius: 8px;
            font-size: 1rem; transition: var(--transition); background-color: #fdfdfd;
        }
        .modal .form-group input:focus, .modal .form-group select:focus {
            border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.2);
            outline: none; background-color: white;
        }
        .form-footer {
            text-align: center; margin-top: 1.5rem; font-size: 0.9rem; color: #6c757d;
            padding-top: 1rem; border-top: 1px solid #e9ecef;
        }
        .form-footer a { color: var(--primary-color); text-decoration: none; font-weight: 500; transition: var(--transition); }
        .form-footer a:hover { text-decoration: underline; }
        .radio-group { display: flex; gap: 1rem; margin-top: 0.5rem; }
        .radio-button { display: flex; align-items: center; gap: 0.5rem; cursor: pointer; }
        .radio-button input[type="radio"] { display: none; }
        .radio-button span {
            padding: 0.5rem 1rem; border: 1px solid #e5e7eb; border-radius: 8px;
            transition: var(--transition); display: inline-block;
        }
        .radio-button input[type="radio"]:checked + span {
            background-color: rgba(108, 99, 255, 0.1); border-color: var(--primary-color);
            color: var(--primary-color); font-weight: 500;
        }

        /* Section Transitions */
        .page-section {
            display: none; opacity: 0; transition: opacity 0.5s ease, transform 0.5s ease;
            transform: translateY(15px);
        }
        .page-section.active { display: block; opacity: 1; transform: translateY(0); }

        /* Dashboard Sub-Section Visibility */
        .hidden-section { display: none !important; opacity: 0; transition: opacity 0.4s ease; }
        .visible-section { display: block !important; opacity: 1; transition: opacity 0.4s ease; }

        /* Reports Section */
        #reportsSection {
            background-color: white; border-radius: var(--card-radius); padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03); border: 1px solid #f0f0f0;
        }
        .report-options p { margin-bottom: 1rem; color: #6b7280; line-height: 1.6; }
        #downloadReportBtn { width: auto; margin-top: 1rem; }
        #noTransactionsMessage, #noBudgetTransactionsMessage {
            color: #9ca3af; text-align: center; padding: 2rem; font-style: italic; display: none;
        }

        /* Settings Section */
        #settingsSection {
            background-color: white; border-radius: var(--card-radius); padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03); border: 1px solid #f0f0f0;
        }
        .settings-container { max-width: 700px; margin: 0 auto; }
        .settings-group {
            background-color: #fdfdfd; border: 1px solid #f0f0f0; border-radius: var(--card-radius);
            padding: 1.5rem; margin-bottom: 2rem;
        }
        .settings-group h3 {
            font-size: 1.2rem; font-weight: 600; color: var(--dark-color); margin-bottom: 1.5rem;
            padding-bottom: 0.75rem; border-bottom: 1px solid #eee;
        }
        #settingsSection .submit-btn { width: auto; padding: 0.8rem 1.8rem; }
        .danger-zone {
            border-color: var(--danger-color-light); border-left: 4px solid var(--danger-color);
            background-color: #fffafa;
        }
        .danger-zone h3 { color: var(--danger-color); border-bottom-color: var(--danger-color-light); }
        .danger-zone p { color: #a95050; margin-bottom: 1rem; }
        .danger-zone .hint { color: #b36a6a; }
        .danger-zone .submit-btn.danger-btn {
            background: var(--danger-color); color: white; border: 1px solid var(--danger-color);
            box-shadow: 0 4px 10px var(--danger-color-light);
        }
        .danger-zone .submit-btn.danger-btn:hover {
            background-color: #c73030; border-color: #c73030;
            box-shadow: 0 6px 15px rgba(239, 68, 68, 0.3); transform: translateY(-2px);
        }


        /* --- Expenzo Pro Section Styles --- */
        #expenzo-pro { /* Scope Pro styles */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Override default font */
            color: var(--pro-dark);
            background-color: var(--pro-light); /* Use Pro light background */
            padding-top: 2rem; /* Add some top padding */
            /* Removed fixed positioning and full height */
        }

        #expenzo-pro .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem; /* Reduced padding */
        }

        #expenzo-pro .hero { text-align: center; margin-bottom: 3rem; /* Reduced margin */ }
        #expenzo-pro .hero h1 {
            font-size: 2.8rem; margin-bottom: 1rem; background: var(--pro-gradient);
            -webkit-background-clip: text; background-clip: text; color: transparent;
        }
        #expenzo-pro .hero p { font-size: 1.1rem; color: #636e72; max-width: 700px; margin: 0 auto 2rem; }

        #expenzo-pro .btn {
            padding: 0.75rem 1.5rem; border-radius: 50px; border: none;
            font-weight: 600; cursor: pointer; transition: all 0.3s;
        }
        #expenzo-pro .btn-pro { background: var(--pro-gradient); color: white; }
        #expenzo-pro .btn-pro:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3); }

        #expenzo-pro .features { margin-bottom: 3rem; }
        #expenzo-pro .section-title { text-align: center; margin-bottom: 2.5rem; }
        #expenzo-pro .section-title h2 { font-size: 2rem; margin-bottom: 0.8rem; }
        #expenzo-pro .section-title p { color: #636e72; max-width: 600px; margin: 0 auto; font-size: 1rem;}

        #expenzo-pro .features-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; /* Adjusted minmax and gap */
        }
        #expenzo-pro .feature-card {
            background: white; border-radius: 10px; padding: 1.5rem; /* Reduced padding */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); transition: transform 0.3s, box-shadow 0.3s;
        }
        #expenzo-pro .feature-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); }
        #expenzo-pro .feature-card.pro { border-top: 4px solid var(--pro-primary); position: relative; overflow: hidden; }
        #expenzo-pro .feature-card.pro::after {
            content: "PRO"; position: absolute; top: 10px; right: 10px; background: var(--pro-gradient);
            color: white; padding: 0.25rem 0.75rem; border-radius: 50px; font-size: 0.75rem; font-weight: 700;
        }
        #expenzo-pro .feature-icon { font-size: 2rem; margin-bottom: 1rem; color: var(--pro-primary); } /* Reduced size */
        #expenzo-pro .feature-card h3 { font-size: 1.2rem; margin-bottom: 0.8rem; } /* Reduced size */
        #expenzo-pro .feature-card p { color: #636e72; line-height: 1.6; font-size: 0.9rem; } /* Reduced size */

        #expenzo-pro .pricing {
            background: white; border-radius: 10px; padding: 2rem; /* Reduced padding */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); margin-bottom: 3rem;
        }
        #expenzo-pro .pricing-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; /* Adjusted minmax and gap */
        }
        #expenzo-pro .pricing-card { padding: 1.5rem; border-radius: 10px; text-align: center; transition: all 0.3s; }
        #expenzo-pro .pricing-card.free { border: 1px solid #dfe6e9; }
        #expenzo-pro .pricing-card.pro { background: var(--pro-gradient); color: white; transform: scale(1.05); }
        #expenzo-pro .pricing-card h3 { font-size: 1.3rem; margin-bottom: 0.8rem; }
        #expenzo-pro .price { font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem; }
        #expenzo-pro .price span { font-size: 0.9rem; font-weight: 400; }
        #expenzo-pro .pricing-features { list-style: none; margin-bottom: 1.5rem; padding: 0; font-size: 0.9rem; }
        #expenzo-pro .pricing-features li { margin-bottom: 0.6rem; line-height: 1.6; }
        #expenzo-pro .pricing-card.free .pricing-features li { color: #636e72; }
        #expenzo-pro .pricing-card.pro .btn { background: white; color: var(--pro-primary); }
        #expenzo-pro .pricing-card.pro .btn:hover { background: rgba(255, 255, 255, 0.9); }
        #expenzo-pro .pricing-card .btn { /* Style for button in free card */
            background-color: var(--pro-primary); color: white;
        }
        #expenzo-pro .pricing-card .btn:hover {
             background-color: var(--pro-primary-dark); transform: translateY(-2px); box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3);
        }

        #expenzo-pro .testimonials { margin-bottom: 3rem; }
        #expenzo-pro .testimonial-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;
        }
        #expenzo-pro .testimonial-card { background: white; border-radius: 10px; padding: 1.5rem; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); }
        #expenzo-pro .testimonial-card .quote { font-style: italic; margin-bottom: 1rem; line-height: 1.6; font-size: 0.95rem; }
        #expenzo-pro .testimonial-author { display: flex; align-items: center; gap: 1rem; }
        #expenzo-pro .author-avatar { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; }
        #expenzo-pro .author-info h4 { margin-bottom: 0.2rem; font-size: 1rem; }
        #expenzo-pro .author-info p { color: #636e72; font-size: 0.85rem; }

        #expenzo-pro .faq { margin-bottom: 3rem; }
        #expenzo-pro .accordion { max-width: 800px; margin: 0 auto; }
        #expenzo-pro .accordion-item { margin-bottom: 1rem; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05); }
        #expenzo-pro .accordion-header { background: white; padding: 1rem 1.5rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-weight: 600; }
        #expenzo-pro .accordion-header:hover { background: #f8f9fa; }
        #expenzo-pro .accordion-content { padding: 0 1.5rem; max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; background: white; }
        #expenzo-pro .accordion-content-inner { padding: 1rem 0; line-height: 1.6; color: #636e72; font-size: 0.95rem; }
        #expenzo-pro .accordion-item.active .accordion-content { max-height: 500px; }

        #expenzo-pro .cta {
            text-align: center; padding: 3rem 1rem; background: var(--pro-gradient);
            color: white; border-radius: 10px; margin-bottom: 0; /* Removed bottom margin */
        }
        #expenzo-pro .cta h2 { font-size: 2rem; margin-bottom: 1rem; }
        #expenzo-pro .cta p { max-width: 600px; margin: 0 auto 1.5rem; font-size: 1.1rem; opacity: 0.9; }

        /* Remove Pro Footer - Main App has one */
        /* #expenzo-pro footer { ... } */


        /* Animations */
        @keyframes float { 0% { transform: translateY(0); } 100% { transform: translateY(-20px); } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Responsive Styles */
        @media (max-width: 1024px) {
            .main-content-grid { grid-template-columns: 1fr; grid-template-areas: "chart" "categories"; }
            .chart-placeholder { height: 250px; }
            .budget-chart-placeholder { height: 300px; }
            .bank-details .container { flex-direction: column; text-align: center; }
            .bank-form-container { max-width: 600px; margin-bottom: 2rem; }
            .bank-image { position: relative; width: 80%; max-width: 300px; opacity: 0.1; margin-top: 2rem; transform: none; right: auto; top: auto; }
            .hero .container { flex-direction: column; text-align: center; }
            .hero-content { max-width: 100%; }
            .hero-image { width: 80%; max-width: 400px; height: auto; margin-top: 2rem; }
            #budgetTransactionsListContainer .transaction-item { flex-wrap: wrap; gap: 0.5rem; padding: 0.8rem; }
            #budgetTransactionsListContainer .transaction-icon { order: 0; margin-right: 0.5rem; }
            #budgetTransactionsListContainer .transaction-details { flex-basis: calc(100% - 50px); margin-right: 0; order: 1; }
            #budgetTransactionsListContainer .transaction-amount { margin-left: 0; order: 2; padding-left: 0; flex-basis: auto; }
            #budgetTransactionsListContainer .transaction-actions { margin-left: auto; order: 3; flex-basis: auto; }
             /* Pro Section Responsive */
             #expenzo-pro .hero h1 { font-size: 2.5rem; }
        }

        @media (max-width: 768px) {
            .container { padding: 0 1rem; }
            .header { padding: 1rem 0; }
            .header .logo { font-size: 1.5rem; }
            .nav { display: none; }
            .auth-buttons button { padding: 0.5rem 1rem; font-size: 0.9rem; }
            .hero { padding-top: 70px; min-height: auto; padding-bottom: 4rem; }
            .hero-content h1 { font-size: 2.5rem; }
            .bank-details { padding-top: 70px; padding-bottom: 4rem; }
            .bank-form-container { padding: 2rem 1.5rem; }
            :root { --sidebar-width: 70px; }
            .sidebar { padding: 1rem 0; }
            .menu-item { justify-content: center; padding: 1rem 0; }
            .menu-item span { display: none; }
            .menu-item i { margin-right: 0; font-size: 1.3rem; }
            .dashboard-content { margin-left: var(--sidebar-width); padding: 1.5rem; }
            .summary-cards { grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
            .main-content-grid { gap: 1rem; }
            .chart-header { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
            #reportsSection { padding: 1rem; }
            #downloadReportBtn { width: 100%; justify-content: center; }
            #budgetsSection { padding: 1rem; }
            .budget-filters { flex-direction: column; align-items: flex-start; gap: 0.8rem; padding: 0.75rem; }
            .budget-filters select { width: 100%; }
            #budgetTransactionsListContainer .transaction-actions { margin-left: 0.5rem; gap: 0.5rem; padding-top: 0.5rem; flex-basis: 100%; justify-content: flex-end; }
            .action-btn { font-size: 1rem; }
            #budgetTransactionsListContainer .transaction-amount { margin-left: auto; padding-left: 0.5rem; }
            #budgetTransactionsListContainer .transaction-details { flex-basis: auto; }
            #settingsSection { padding: 1rem; }
            .settings-container { padding: 0; }
            .settings-group { padding: 1rem; }
            #settingsSection .submit-btn { width: 100%; }
             /* Pro Section Responsive */
            #expenzo-pro .hero h1 { font-size: 2rem; }
            #expenzo-pro .hero p { font-size: 1rem; }
            #expenzo-pro .section-title h2 { font-size: 1.8rem; }
            #expenzo-pro .section-title p { font-size: 0.9rem; }
            #expenzo-pro .features-grid { grid-template-columns: 1fr; } /* Stack features */
            #expenzo-pro .pricing-grid { grid-template-columns: 1fr; } /* Stack pricing */
            #expenzo-pro .pricing-card.pro { transform: scale(1); } /* Disable scale on mobile */
            #expenzo-pro .testimonial-grid { grid-template-columns: 1fr; } /* Stack testimonials */
            #expenzo-pro .cta h2 { font-size: 1.8rem; }
            #expenzo-pro .cta p { font-size: 1rem; }
        }

        @media (max-width: 576px) {
            :root { --sidebar-width: 0; }
            .sidebar { display: none; }
            .dashboard-content { margin-left: 0; padding: 1rem; }
            .header .container { padding: 0 1rem; }
            .auth-buttons { gap: 0.5rem; }
            .auth-buttons button { margin-left: 0; padding: 0.4rem 0.8rem; font-size: 0.8rem; }
            .user-profile { gap: 0.5rem; }
            .avatar { width: 35px; height: 35px; }
            .hero-content h1 { font-size: 2rem; }
            .hero-content .tagline { font-size: 1rem; }
            .hero-content .description { font-size: 1rem; }
            .cta-btn { padding: 0.8rem 2rem; font-size: 1rem; }
            .bank-form-container h2 { font-size: 1.5rem; }
            .bank-form-container { padding: 1.5rem 1rem; }
            .modal-content { padding: 1.5rem; max-width: 95%; }
            .dashboard-header { flex-direction: column; align-items: flex-start; gap: 1rem; }
            .date-filter { width: 100%; justify-content: space-between; }
            .summary-cards { grid-template-columns: 1fr; gap: 1rem; }
            .section-header { flex-direction: column; align-items: flex-start; gap: 1rem; }
            .add-transaction-btn { width: 100%; justify-content: center; }
            .transaction-item { padding: 0.8rem; }
            .transaction-details h4 { font-size: 0.9rem; }
            .transaction-amount { font-size: 0.9rem; }
            #reportsSection { padding: 1rem 0.8rem; }
            #downloadReportBtn { font-size: 0.9rem; padding: 0.8rem 1rem;}
            #budgetTransactionsListContainer .transaction-item { flex-wrap: wrap; align-items: flex-start; padding: 0.6rem; }
            #budgetTransactionsListContainer .transaction-icon { margin-right: 0.5rem; width: 35px; height: 35px; font-size: 0.9rem; }
            #budgetTransactionsListContainer .transaction-details { flex-basis: calc(100% - 45px); }
            #budgetTransactionsListContainer .transaction-amount { margin-left: 0; padding-left: 0; flex-basis: 50%; text-align: left; padding-top: 0.3rem; }
            #budgetTransactionsListContainer .transaction-actions { margin-left: 0; flex-basis: 50%; justify-content: flex-end; padding-top: 0.3rem; gap: 0.8rem; }
            #budgetTransactionsListContainer .action-btn { font-size: 1.1rem; }
            .settings-group h3 { font-size: 1.1rem; }
            #settingsSection .submit-btn { font-size: 0.9rem; padding: 0.8rem 1.5rem; }
            .danger-zone .hint { font-size: 0.75rem; }
             /* Pro Section Responsive */
             #expenzo-pro .hero h1 { font-size: 1.8rem; }
             #expenzo-pro .hero p { font-size: 0.9rem; }
             #expenzo-pro .section-title h2 { font-size: 1.5rem; }
             #expenzo-pro .feature-card h3 { font-size: 1.1rem; }
             #expenzo-pro .pricing-card h3 { font-size: 1.2rem; }
             #expenzo-pro .price { font-size: 2rem; }
             #expenzo-pro .cta h2 { font-size: 1.5rem; }
             #expenzo-pro .cta p { font-size: 0.9rem; }
             #expenzo-pro .accordion-header { font-size: 0.9rem; padding: 0.8rem 1rem;}
             #expenzo-pro .accordion-content-inner { font-size: 0.9rem; }
        }
    </style>
</head>
<body>
    <!-- Preloader -->
    <div class="preloader">
        <div class="logo-container">
            <span class="logo">EXPENZO</span>
            <span class="tagline">smart spending, brighter future</span>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">EXPENZO</div>
            <nav class="nav">
                <ul>
                    <li><a href="#" data-page="home" class="active">Home</a></li>
                    <li><a href="#" data-page="bank-details">Bank Details</a></li>
                    <li><a href="#" data-page="dashboard">Dashboard</a></li>
                </ul>
            </nav>
            <div class="auth-buttons" id="authButtons">
                <button class="login-btn" id="loginBtn">Login</button>
                <button class="signup-btn" id="signupBtn">Sign Up</button>
            </div>
            <div class="user-profile" id="userProfile" style="display: none;">
                <span class="username" id="headerUsername">John Doe</span>
                <div class="avatar" id="headerAvatar">JD</div>
            </div>
        </div>
    </header>

    <!-- Home Section -->
    <section id="home" class="hero page-section active">
        <div class="container">
            <div class="hero-content">
                <h1>Take Control of Your <span class="highlight">Finances</span></h1>
                <p class="tagline">smart spending, brighter future</p>
                <p class="description">EXPENZO helps you track expenses, set budgets, and achieve your financial goals with ease.</p>
                <button class="cta-btn" id="exploreBtn">Explore Now</button>
            </div>
            <div class="hero-image">
                <div class="gradient-circle"></div>
                <div class="gradient-circle"></div>
            </div>
        </div>
    </section>

    <!-- Bank Details Section -->
    <section id="bank-details" class="bank-details page-section">
        <div class="container">
            <div class="bank-form-container">
                <h2>Connect Your Bank Account</h2>
                <p class="subtitle">Securely link your bank to track expenses automatically</p>
                <form id="bankDetailsForm">
                    <div class="form-group">
                        <label for="fullName">Full Name (as per bank records)</label>
                        <input type="text" id="fullName" required>
                    </div>
                    <div class="form-group">
                        <label for="accountNumber">Bank Account Number</label>
                        <input type="text" id="accountNumber" pattern="\d+" title="Please enter only numbers" required>
                    </div>
                    <div class="form-group">
                        <label for="bankName">Bank Name</label>
                        <select id="bankName" required>
                            <option value="">Select your bank</option>
                            <option value="sbi">State Bank of India</option>
                            <option value="hdfc">HDFC Bank</option>
                            <option value="icici">ICICI Bank</option>
                            <option value="axis">Axis Bank</option>
                            <option value="other">Other Bank</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="ifscCode">IFSC Code</label>
                        <input type="text" id="ifscCode" pattern="^[A-Z]{4}0[A-Z0-9]{6}$" title="Enter a valid IFSC code (e.g., SBIN0123456)" required>
                    </div>
                    <div class="form-group">
                        <label for="bankPassword">Create Password</label>
                        <input type="password" id="bankPassword" required>
                        <p class="hint">This will be used to securely authenticate your bank connection</p>
                    </div>
                    <button type="submit" class="submit-btn">Connect Bank Account</button>
                </form>
                <div class="alternative-option">
                    <button class="ntl-btn" id="ntlBtn">Continue Without Linking Bank</button>
                    <p class="ntl-description">Click this button to proceed without linking your bank account. You can manually add transactions.</p>
                </div>
            </div>
            <div class="bank-image">
                <div class="gradient-circle"></div>
                <div class="gradient-circle"></div>
                <img src="https://cdn-icons-png.flaticon.com/512/2830/2830280.png" alt="Bank Security" class="security-icon">
            </div>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section id="dashboard" class="page-section">
        <main class="dashboard-container">
            <aside class="sidebar">
                <div class="sidebar-menu">
                    <div class="menu-item active" id="dashboardMenuItem">
                        <i class="fas fa-home"></i>
                        <span>Dashboard</span>
                    </div>
                    <div class="menu-item" id="transactionsMenuItem">
                        <i class="fas fa-exchange-alt"></i>
                        <span>Transactions</span>
                    </div>
                    <div class="menu-item" id="budgetsMenuItem">
                        <i class="fas fa-wallet"></i>
                        <span>Budgets</span>
                    </div>
                     <div class="menu-item" id="reportsMenuItem">
                        <i class="fas fa-chart-pie"></i>
                        <span>Reports</span>
                    </div>
                    <div class="menu-item" id="proMenuItem"> <!-- NEW Pro Menu Item -->
                        <i class="fas fa-star"></i> <!-- Example: Star icon -->
                        <span>Expenzo Pro</span>
                    </div>
                    <div class="menu-item" id="settingsMenuItem">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </div>
                </div>
            </aside>
            <section class="dashboard-content">
                <!-- Dashboard Overview Sub-section -->
                <div id="dashboardOverview" class="visible-section">
                    <div class="dashboard-header">
                        <h1>Dashboard Overview</h1>
                        <div class="date-filter">
                            <span>Current Period</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>
                    <div class="summary-cards">
                        <div class="summary-card">
                            <div class="card-header">
                                <h3>Total Income</h3>
                                <i class="fas fa-arrow-up"></i>
                            </div>
                            <div class="card-body">
                                <h2 id="totalIncomeValue">₹0.00</h2>
                            </div>
                        </div>
                        <div class="summary-card">
                            <div class="card-header">
                                <h3>Total Expense</h3>
                                <i class="fas fa-arrow-down"></i>
                            </div>
                            <div class="card-body">
                                <h2 id="totalExpenseValue">₹0.00</h2>
                            </div>
                        </div>
                         <div class="summary-card">
                            <div class="card-header">
                                <h3>Current Balance</h3>
                                <i class="fas fa-wallet"></i>
                            </div>
                            <div class="card-body">
                                <h2 id="currentBalanceValue">₹0.00</h2>
                            </div>
                        </div>
                        <div class="summary-card">
                            <div class="card-header">
                                <h3>Net Flow</h3>
                                <i class="fas fa-balance-scale"></i>
                            </div>
                            <div class="card-body">
                                <h2 id="netFlowValue">₹0.00</h2>
                            </div>
                        </div>
                    </div>
                    <div class="main-content-grid">
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3>Income vs Expense (Last 6 Months)</h3>
                                <div class="chart-legend">
                                    <span class="legend-income"><i class="fas fa-circle"></i> Income</span>
                                    <span class="legend-expense"><i class="fas fa-circle"></i> Expense</span>
                                </div>
                            </div>
                            <div class="chart-placeholder">
                                <canvas id="incomeExpenseChart"></canvas>
                            </div>
                        </div>
                        <div class="categories-card">
                            <div class="card-header">
                                <h3>Expense Categories</h3>
                            </div>
                            <div class="card-body" id="expenseCategoriesBody">
                                <p class="no-data">No expense data yet.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Transactions Sub-section -->
                <div id="transactionsSection" class="hidden-section">
                    <div class="section-header">
                        <h2>Recent Transactions</h2>
                        <button class="add-transaction-btn" id="addTransactionBtnMain">
                            <i class="fas fa-plus"></i> Add Transaction
                        </button>
                    </div>
                     <p style="margin-bottom: 1rem; color: #6b7280;">Showing the last 10 transactions. Go to the 'Budgets' section for full history and details.</p>
                    <div class="transactions-list" id="transactionsListContainer">
                         <p class="no-data" id="noTransactionsMessage">No transactions added yet.</p>
                    </div>
                </div>

                <!-- Budgets Section -->
                <div id="budgetsSection" class="hidden-section">
                    <div class="section-header">
                        <h2>Transaction History & Analysis</h2>
                        <button class="add-transaction-btn" id="addTransactionBtnBudget">
                            <i class="fas fa-plus"></i> Add Transaction
                        </button>
                    </div>
                    <div class="budget-filters">
                        <label for="budgetPeriodFilter">Filter by:</label>
                        <select id="budgetPeriodFilter">
                            <option value="all">All Time</option>
                            <option value="today">Today</option>
                            <option value="this_week">This Week</option>
                            <option value="this_month" selected>This Month</option>
                            <option value="this_year">This Year</option>
                        </select>
                    </div>
                    <div class="budget-chart-container">
                         <div class="chart-header">
                            <h3>Income/Expense Trend</h3>
                            <div class="chart-legend">
                                <span class="legend-income"><i class="fas fa-circle"></i> Income</span>
                                <span class="legend-expense"><i class="fas fa-circle"></i> Expense</span>
                            </div>
                         </div>
                         <div class="chart-placeholder budget-chart-placeholder">
                            <canvas id="budgetTrendChart"></canvas>
                            <p class="no-data" id="noBudgetDataForChart">No data available for the selected period.</p>
                         </div>
                    </div>
                    <div class="budget-transaction-history">
                         <h3>Detailed History</h3>
                         <div class="transactions-list" id="budgetTransactionsListContainer">
                            <p class="no-data" id="noBudgetTransactionsMessage">No transactions found for the selected period.</p>
                         </div>
                    </div>
                </div>

                 <!-- Reports Sub-section -->
                <div id="reportsSection" class="hidden-section">
                    <div class="section-header">
                        <h2>Reports</h2>
                    </div>
                    <div class="report-options">
                        <p>Download a summary of your expenses in CSV format. This includes all recorded expense transactions.</p>
                        <button id="downloadReportBtn" class="submit-btn" style="margin-top: 1rem; width: auto;">
                            <i class="fas fa-download"></i> Download Expense Report (CSV)
                        </button>
                    </div>
                </div>

                <!-- Expenzo Pro Section -->
                <div id="expenzo-pro" class="hidden-section"> <!-- Added hidden-section -->
                    <div class="container">
                        <section class="hero">
                            <h1>Take Control of Your Finances</h1>
                            <p>Expenzo Pro delivers premium financial management tools to help you budget smarter, save more, and achieve your financial goals faster.</p>
                            <button class="btn btn-pro">Upgrade to Pro</button>
                        </section>

                        <section class="features">
                            <div class="section-title">
                                <h2>Premium Features</h2>
                                <p>Discover what makes Expenso Pro the ultimate financial management solution</p>
                            </div>
                            <div class="features-grid">
                                <div class="feature-card pro"><div class="feature-icon">💳</div><h3>Multi-Account Sync</h3><p>Automatically sync all your bank accounts, credit cards, and investment portfolios in one place.</p></div>
                                <div class="feature-card pro"><div class="feature-icon">📊</div><h3>Advanced Analytics</h3><p>Get deep insights with customizable reports and predictive financial forecasting.</p></div>
                                <div class="feature-card pro"><div class="feature-icon">🔐</div><h3>Priority Support</h3><p>24/7 access to our premium support team with guaranteed response times.</p></div>
                                <div class="feature-card pro"><div class="feature-icon">🤖</div><h3>AI Financial Assistant</h3><p>Personalized recommendations to optimize your finances based on your spending.</p></div>
                                <div class="feature-card pro"><div class="feature-icon">🏦</div><h3>Investment Tracking</h3><p>Monitor portfolios with advanced performance metrics and growth projections.</p></div>
                                <div class="feature-card pro"><div class="feature-icon">🔔</div><h3>Smart Alerts</h3><p>Instant notifications for unusual spending, bill due dates, and savings opportunities.</p></div>
                                <div class="feature-card pro"><div class="feature-icon">🌎</div><h3>Global Currency Support</h3><p>Manage finances across multiple currencies with automatic conversion.</p></div>
                                <div class="feature-card pro"><div class="feature-icon">👨‍👩‍👧‍👦</div><h3>Family Sharing</h3><p>Share budgets and goals with family members while maintaining privacy controls.</p></div>
                            </div>
                        </section>

                        <section class="pricing">
                            <div class="section-title">
                                <h2>Simple, Transparent Pricing</h2>
                                <p>Choose the plan that works best for your financial needs</p>
                            </div>
                            <div class="pricing-grid">
                                <div class="pricing-card free">
                                    <h3>Free</h3>
                                    <div class="price">₹0 <span>/month</span></div> <!-- INR -->
                                    <ul class="pricing-features"><li>Basic expense tracking</li><li>Manual transaction entry</li><li>Simple budget creation</li><li>Email support</li><li>Limited reports</li></ul>
                                    <button class="btn btn-primary">Current Plan</button>
                                </div>
                                <div class="pricing-card pro">
                                    <h3>Pro</h3>
                                    <div class="price">₹799 <span>/month</span></div> <!-- INR -->
                                    <ul class="pricing-features"><li>All Free features plus:</li><li>Multi-account auto-sync</li><li>Advanced analytics & reports</li><li>AI financial assistant</li><li>Investment tracking</li><li>Priority 24/7 support</li><li>Family sharing</li><li>And all premium features</li></ul>
                                    <button class="btn">Try Pro Free for 14 Days</button>
                                </div>
                            </div>
                        </section>

                        <section class="testimonials">
                            <div class="section-title"><h2>What Our Pro Users Say</h2><p>Join thousands of satisfied users</p></div>
                            <div class="testimonial-grid">
                                <div class="testimonial-card">
                                    <div class="quote">"Expenso Pro helped me pay off ₹1,50,000 in credit card debt by identifying spending leaks I never noticed. The investment tracking alone is worth the price."</div> <!-- INR -->
                                    <div class="testimonial-author"><img src="https://randomuser.me/api/portraits/women/32.jpg" alt="Sarah J." class="author-avatar"><div class="author-info"><h4>Sarah J.</h4><p>Small Business Owner</p></div></div>
                                </div>
                                <div class="testimonial-card">
                                    <div class="quote">"As someone who travels frequently, the multi-currency support has been a game-changer. I finally understand where all my money goes."</div>
                                    <div class="testimonial-author"><img src="https://randomuser.me/api/portraits/men/45.jpg" alt="Michael T." class="author-avatar"><div class="author-info"><h4>Michael T.</h4><p>Consultant</p></div></div>
                                </div>
                                <div class="testimonial-card">
                                    <div class="quote">"The AI savings recommendations have helped me build an emergency fund for the first time. It's like having a financial advisor in my pocket."</div>
                                    <div class="testimonial-author"><img src="https://randomuser.me/api/portraits/women/68.jpg" alt="Priya K." class="author-avatar"><div class="author-info"><h4>Priya K.</h4><p>Software Engineer</p></div></div>
                                </div>
                            </div>
                        </section>

                        <section class="faq">
                             <div class="section-title"><h2>Frequently Asked Questions</h2><p>Everything about Expenzo Pro</p></div>
                             <div class="accordion">
                                 <div class="accordion-item"><div class="accordion-header"><span>Payment methods?</span><span>+</span></div><div class="accordion-content"><div class="accordion-content-inner">We accept major credit/debit cards, UPI, Net Banking, and PayPal. Secure processing assured.</div></div></div>
                                 <div class="accordion-item"><div class="accordion-header"><span>Is my data secure?</span><span>+</span></div><div class="accordion-content"><div class="accordion-content-inner">Absolutely. Bank-level 256-bit encryption, read-only secure APIs. We never store banking credentials.</div></div></div>
                                 <div class="accordion-item"><div class="accordion-header"><span>Cancel anytime?</span><span>+</span></div><div class="accordion-content"><div class="accordion-content-inner">Yes. Cancel anytime. Access Pro features until your billing period ends, then revert to Free.</div></div></div>
                                 <div class="accordion-item"><div class="accordion-header"><span>How does free trial work?</span><span>+</span></div><div class="accordion-content"><div class="accordion-content-inner">Full access for 14 days. If not cancelled, auto-renews at Pro rate. Reminders sent before trial ends.</div></div></div>
                                 <div class="accordion-item"><div class="accordion-header"><span>Annual billing discount?</span><span>+</span></div><div class="accordion-content"><div class="accordion-content-inner">Yes! Save with annual billing (equivalent to 2 months free). Switch anytime in settings.</div></div></div>
                             </div>
                        </section>

                        <section class="cta">
                            <h2>Ready to Transform Your Finances?</h2>
                            <p>Join thousands of Expenso Pro users saving more and reaching goals faster.</p>
                            <button class="btn btn-pro">Start Your 14-Day Free Trial</button>
                        </section>
                    </div>
                </div>


                 <!-- Settings Section -->
                <div id="settingsSection" class="hidden-section">
                     <div class="section-header"><h2>Settings</h2></div>
                     <div class="settings-container">
                        <div class="settings-group">
                            <h3>Profile Information</h3>
                            <form id="profileSettingsForm">
                                <div class="form-group">
                                    <label for="settingsName">Your Name</label>
                                    <input type="text" id="settingsName" placeholder="Enter your name" required>
                                </div>
                                <button type="submit" class="submit-btn" id="saveProfileBtn">Save Profile Changes</button>
                            </form>
                        </div>
                        <div class="settings-group">
                            <h3>Security</h3>
                             <form id="passwordChangeForm">
                                <div class="form-group">
                                    <label for="currentPassword">Current Password</label>
                                    <input type="password" id="currentPassword" placeholder="Enter current password">
                                </div>
                                <div class="form-group">
                                    <label for="newPassword">New Password</label>
                                    <input type="password" id="newPassword" placeholder="Enter new password" minlength="8">
                                </div>
                                <div class="form-group">
                                    <label for="confirmNewPassword">Confirm New Password</label>
                                    <input type="password" id="confirmNewPassword" placeholder="Confirm new password">
                                </div>
                                <button type="submit" class="submit-btn" id="changePasswordBtn">Change Password</button>
                             </form>
                        </div>
                        <div class="settings-group danger-zone">
                            <h3>Danger Zone</h3>
                            <p>Be careful, these actions cannot be undone.</p>
                            <div class="form-group">
                                <label>Clear Transaction Data</label>
                                <p class="hint">This will permanently delete all your recorded income and expense transactions.</p>
                                <button type="button" class="submit-btn danger-btn" id="clearAllDataBtn">Clear All Transactions</button>
                            </div>
                        </div>
                     </div>
                </div>

            </section> <!-- End dashboard-content -->
        </main>
    </section>

    <!-- Modals -->
    <div class="modal" id="loginModal"> <div class="modal-content"> <div class="modal-header"> <h2>Login to EXPENZO</h2> <button class="close-btn" id="closeLoginModal">×</button> </div> <form id="loginForm"> <div class="form-group"> <label for="loginEmail">Email</label> <input type="email" id="loginEmail" required> </div> <div class="form-group"> <label for="loginPassword">Password</label> <input type="password" id="loginPassword" required> </div> <button type="submit" class="submit-btn">Login</button> </form> <div class="form-footer"> Don't have an account? <a href="#" id="showSignup">Sign up</a> </div> </div> </div>
    <div class="modal" id="signupModal"> <div class="modal-content"> <div class="modal-header"> <h2>Join EXPENZO</h2> <button class="close-btn" id="closeSignupModal">×</button> </div> <form id="signupForm"> <div class="form-group"> <label for="signupName">Name</label> <input type="text" id="signupName" required> </div> <div class="form-group"> <label for="signupEmail">Email</label> <input type="email" id="signupEmail" required> </div> <div class="form-group"> <label for="signupPassword">Password</label> <input type="password" id="signupPassword" minlength="8" required> </div> <div class="form-group"> <label for="signupConfirmPassword">Confirm Password</label> <input type="password" id="signupConfirmPassword" required> </div> <button type="submit" class="submit-btn">Create Account</button> </form> <div class="form-footer"> Already have an account? <a href="#" id="showLogin">Login</a> </div> </div> </div>
    <div class="modal" id="transactionModal"> <div class="modal-content"> <div class="modal-header"> <h2 id="transactionModalTitle">Add New Transaction</h2> <button class="close-btn" id="closeTransactionModal">×</button> </div> <form id="transactionForm"> <input type="hidden" id="editTransactionId" value=""> <div class="form-group"> <label for="transactionTitle">Title</label> <input type="text" id="transactionTitle" placeholder="e.g. Groceries, Salary" required> </div> <div class="form-group"> <label for="transactionAmount">Amount (₹)</label> <input type="number" id="transactionAmount" placeholder="e.g. 5000" step="0.01" min="0.01" required> </div> <div class="form-group"> <label>Type</label> <div class="radio-group"> <label class="radio-button"> <input type="radio" name="transactionType" value="expense" checked> <span>Expense</span> </label> <label class="radio-button"> <input type="radio" name="transactionType" value="income"> <span>Income</span> </label> </div> </div> <div class="form-group"> <label for="transactionCategory">Category</label> <select id="transactionCategory" required> <option value="">Select Category</option> <option value="food">Food</option> <option value="utilities">Utilities</option> <option value="transport">Transport</option> <option value="housing">Housing</option> <option value="salary">Salary</option> <option value="entertainment">Entertainment</option> <option value="health">Health</option> <option value="shopping">Shopping</option> <option value="other">Other</option> </select> </div> <div class="form-group"> <label for="transactionDate">Date</label> <input type="date" id="transactionDate" required> </div> <button type="submit" class="submit-btn" id="transactionSubmitBtn">Add Transaction</button> </form> </div> </div>

    <!-- Include Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Include the JS file -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Global Variables & State ---
            let allTransactions = [];
            let currentView = 'dashboardOverview';
            let incomeExpenseChartInstance = null;
            let budgetTrendChartInstance = null;
            let editingTransactionId = null;
            let currentUserName = 'John Doe';
            let currentUserEmail = '';

            // --- Utility Functions ---
            function formatINR(number) { const num = Number(number); if (isNaN(num)) return '₹0.00'; return '₹' + num.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 }); }
            function capitalizeFirstLetter(string) { return string ? string.charAt(0).toUpperCase() + string.slice(1) : ''; }
            function escapeCSV(field) { if (field === null || field === undefined) return ''; const stringField = String(field); if (stringField.includes(',') || stringField.includes('"') || stringField.includes('\n')) { const escapedField = stringField.replace(/"/g, '""'); return `"${escapedField}"`; } return stringField; }
            function getIconForCategory(category) { switch (category?.toLowerCase()) { case 'food': return 'fa-shopping-basket'; case 'utilities': return 'fa-bolt'; case 'transport': return 'fa-gas-pump'; case 'housing': return 'fa-home'; case 'salary': return 'fa-money-bill-wave'; case 'entertainment': return 'fa-film'; case 'health': return 'fa-heartbeat'; case 'shopping': return 'fa-shopping-bag'; default: return 'fa-question-circle'; } }

            // --- DOM Element References ---
            const preloader = document.querySelector('.preloader');
            const loginModal = document.getElementById('loginModal');
            const signupModal = document.getElementById('signupModal');
            const transactionModal = document.getElementById('transactionModal');
            const closeLoginModalBtn = document.getElementById('closeLoginModal');
            const closeSignupModalBtn = document.getElementById('closeSignupModal');
            const closeTransactionModalBtn = document.getElementById('closeTransactionModal');
            const pageSections = document.querySelectorAll('.page-section');
            const navLinks = document.querySelectorAll('.nav ul li a');
            const authButtons = document.getElementById('authButtons');
            const userProfile = document.getElementById('userProfile');
            const loginBtn = document.getElementById('loginBtn');
            const signupBtn = document.getElementById('signupBtn');
            const exploreBtn = document.getElementById('exploreBtn');
            const ntlBtn = document.getElementById('ntlBtn');
            const addTransactionBtnMain = document.getElementById('addTransactionBtnMain');
            const addTransactionBtnBudget = document.getElementById('addTransactionBtnBudget');
            const showSignupLink = document.getElementById('showSignup');
            const showLoginLink = document.getElementById('showLogin');
            const downloadReportBtn = document.getElementById('downloadReportBtn');
            const bankDetailsForm = document.getElementById('bankDetailsForm');
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');
            const transactionForm = document.getElementById('transactionForm');
            const transactionModalTitle = document.getElementById('transactionModalTitle');
            const transactionSubmitBtn = document.getElementById('transactionSubmitBtn');
            const editTransactionIdInput = document.getElementById('editTransactionId');
            const dashboardOverview = document.getElementById('dashboardOverview');
            const transactionsSection = document.getElementById('transactionsSection');
            const reportsSection = document.getElementById('reportsSection');
            const budgetsSection = document.getElementById('budgetsSection');
            const settingsSection = document.getElementById('settingsSection');
            const proSection = document.getElementById('expenzo-pro'); // Pro Section Ref
            const dashboardMenuItem = document.getElementById('dashboardMenuItem');
            const transactionsMenuItem = document.getElementById('transactionsMenuItem');
            const reportsMenuItem = document.getElementById('reportsMenuItem');
            const budgetsMenuItem = document.getElementById('budgetsMenuItem');
            const settingsMenuItem = document.getElementById('settingsMenuItem');
            const proMenuItem = document.getElementById('proMenuItem'); // Pro Menu Ref
            const sidebarMenuItems = document.querySelectorAll('.sidebar-menu .menu-item');
            const header = document.querySelector('.header');
            const transactionsListContainer = document.getElementById('transactionsListContainer');
            const noTransactionsMessage = document.getElementById('noTransactionsMessage');
            const totalIncomeValueEl = document.getElementById('totalIncomeValue');
            const totalExpenseValueEl = document.getElementById('totalExpenseValue');
            const currentBalanceValueEl = document.getElementById('currentBalanceValue');
            const netFlowValueEl = document.getElementById('netFlowValue');
            const transactionDateInput = document.getElementById('transactionDate');
            const budgetPeriodFilter = document.getElementById('budgetPeriodFilter');
            const budgetTransactionsListContainer = document.getElementById('budgetTransactionsListContainer');
            const noBudgetTransactionsMessage = document.getElementById('noBudgetTransactionsMessage');
            const budgetTrendChartCanvas = document.getElementById('budgetTrendChart');
            const noBudgetDataForChartMessage = document.getElementById('noBudgetDataForChart');
            const headerUsername = document.getElementById('headerUsername');
            const headerAvatar = document.getElementById('headerAvatar');
            const profileSettingsForm = document.getElementById('profileSettingsForm');
            const passwordChangeForm = document.getElementById('passwordChangeForm');
            const settingsNameInput = document.getElementById('settingsName');
            const currentPasswordInput = document.getElementById('currentPassword');
            const newPasswordInput = document.getElementById('newPassword');
            const confirmNewPasswordInput = document.getElementById('confirmNewPassword');
            const saveProfileBtn = document.getElementById('saveProfileBtn');
            const changePasswordBtn = document.getElementById('changePasswordBtn');
            const clearAllDataBtn = document.getElementById('clearAllDataBtn');

            // --- Preloader ---
            if (preloader) { window.addEventListener('load', () => { setTimeout(() => { preloader.style.opacity = '0'; setTimeout(() => { preloader.style.display = 'none'; }, 500); }, 500); }); }

            // --- Modal Management ---
            function openModal(modal) { if (modal) { modal.style.display = 'flex'; setTimeout(() => modal.classList.add('active'), 10); } }
            function closeModal(modal) { if (modal) { modal.classList.remove('active'); setTimeout(() => { modal.style.display = 'none'; if (modal === transactionModal) { resetTransactionModal(); } }, 300); } }
            function resetTransactionModal() { transactionForm.reset(); transactionModalTitle.textContent = 'Add New Transaction'; transactionSubmitBtn.textContent = 'Add Transaction'; editTransactionIdInput.value = ''; editingTransactionId = null; if (transactionDateInput) transactionDateInput.value = new Date().toISOString().split('T')[0]; }
            if (closeLoginModalBtn) closeLoginModalBtn.addEventListener('click', () => closeModal(loginModal)); if (closeSignupModalBtn) closeSignupModalBtn.addEventListener('click', () => closeModal(signupModal)); if (closeTransactionModalBtn) closeTransactionModalBtn.addEventListener('click', () => closeModal(transactionModal)); window.addEventListener('click', (e) => { if (e.target === loginModal) closeModal(loginModal); if (e.target === signupModal) closeModal(signupModal); if (e.target === transactionModal) closeModal(transactionModal); });

            // --- User Profile Update ---
            function updateUserProfileDisplay(name, email) { currentUserName = name; currentUserEmail = email; if (headerUsername) headerUsername.textContent = name; if (headerAvatar) headerAvatar.textContent = (name?.[0] || email?.[0] || '?').toUpperCase(); if (settingsNameInput) settingsNameInput.value = name; saveUserData(); }

            // --- Page Navigation & State ---
             function showPage(pageId) {
                // Hide all sections first (including non-dashboard ones)
                document.querySelectorAll('section.page-section, div.page-section').forEach(section => section.classList.remove('active'));
                navLinks.forEach(link => link.classList.remove('active'));

                const targetSection = document.getElementById(pageId);
                const targetLink = document.querySelector(`.nav a[data-page="${pageId}"]`);

                if (targetSection) {
                    targetSection.classList.add('active');
                }
                 if (targetLink) {
                    targetLink.classList.add('active');
                }

                const isLoggedIn = localStorage.getItem('expenzoUserLoggedIn') === 'true';

                if (pageId === 'dashboard') {
                    if (!isLoggedIn) { showPage('home'); openModal(loginModal); return; }
                    authButtons.style.display = 'none'; userProfile.style.display = 'flex';
                     // Make sure the dashboard *section* is active, then show the correct sub-view
                     if(document.getElementById('dashboard')) {
                        document.getElementById('dashboard').classList.add('active');
                     }
                    showDashboardSubView(currentView); // Show last/default dashboard view
                } else if (pageId === 'bank-details') {
                    if (!isLoggedIn) { showPage('home'); openModal(loginModal); return; }
                    authButtons.style.display = 'none'; userProfile.style.display = 'flex';
                } else if (pageId === 'home') {
                    if (!isLoggedIn) { authButtons.style.display = 'flex'; userProfile.style.display = 'none'; }
                    else { authButtons.style.display = 'none'; userProfile.style.display = 'flex'; }
                } else {
                     // Handle other top-level pages if added later
                     // For now, assume non-dashboard pages hide user profile/show auth buttons if not logged in
                    if (!isLoggedIn) { authButtons.style.display = 'flex'; userProfile.style.display = 'none'; }
                    else { authButtons.style.display = 'none'; userProfile.style.display = 'flex'; }
                }

                // If navigating *away* from dashboard, hide dashboard sub-sections
                if (pageId !== 'dashboard') {
                     document.querySelectorAll('#dashboard .visible-section, #dashboard .hidden-section').forEach(subSection => {
                        subSection.classList.remove('visible-section');
                        subSection.classList.add('hidden-section'); // Ensure all dashboard parts are hidden
                    });
                }

                window.scrollTo(0, 0);
            }
            navLinks.forEach(link => { link.addEventListener('click', (e) => { e.preventDefault(); const page = link.getAttribute('data-page'); if (page) showPage(page); }); });

            // --- Button Event Listeners ---
            if (loginBtn) loginBtn.addEventListener('click', () => openModal(loginModal));
            if (signupBtn) signupBtn.addEventListener('click', () => openModal(signupModal));
            if (exploreBtn) exploreBtn.addEventListener('click', () => { localStorage.getItem('expenzoUserLoggedIn') === 'true' ? showPage('bank-details') : openModal(loginModal); });
            if (ntlBtn) { ntlBtn.addEventListener('click', () => { alert('Proceeding without bank linking.'); showPage('dashboard'); initializeAppDashboard(); }); }
            if (addTransactionBtnMain) addTransactionBtnMain.addEventListener('click', () => { resetTransactionModal(); openModal(transactionModal); });
            if (addTransactionBtnBudget) addTransactionBtnBudget.addEventListener('click', () => { resetTransactionModal(); openModal(transactionModal); });
            if (showSignupLink) { showSignupLink.addEventListener('click', (e) => { e.preventDefault(); closeModal(loginModal); setTimeout(() => openModal(signupModal), 350); }); }
            if (showLoginLink) { showLoginLink.addEventListener('click', (e) => { e.preventDefault(); closeModal(signupModal); setTimeout(() => openModal(loginModal), 350); }); }
            if (downloadReportBtn) downloadReportBtn.addEventListener('click', generateAndDownloadReport);
            if (budgetPeriodFilter) { budgetPeriodFilter.addEventListener('change', () => updateBudgetSection()); }

            // --- Form Submissions ---
            if (bankDetailsForm) { bankDetailsForm.addEventListener('submit', (e) => { e.preventDefault(); alert(`Bank connection simulated.`); showPage('dashboard'); }); }
            if (loginForm) { loginForm.addEventListener('submit', (e) => { e.preventDefault(); const email = document.getElementById('loginEmail').value; const name = email.split('@')[0]; updateUserProfileDisplay(name, email); localStorage.setItem('expenzoUserLoggedIn', 'true'); authButtons.style.display = 'none'; userProfile.style.display = 'flex'; alert(`Login simulated. Welcome back, ${name}!`); closeModal(loginModal); showPage('dashboard'); initializeAppDashboard(); }); }
            if (signupForm) { signupForm.addEventListener('submit', (e) => { e.preventDefault(); const password = document.getElementById('signupPassword').value; const confirmPassword = document.getElementById('signupConfirmPassword').value; const name = document.getElementById('signupName').value; const email = document.getElementById('signupEmail').value; if (password !== confirmPassword) { alert("Passwords don't match!"); return; } if (password.length < 8) { alert("Password must be >= 8 chars."); return; } updateUserProfileDisplay(name, email); localStorage.setItem('expenzoUserLoggedIn', 'true'); authButtons.style.display = 'none'; userProfile.style.display = 'flex'; alert(`Signup simulated. Welcome, ${name}!`); closeModal(signupModal); showPage('dashboard'); initializeAppDashboard(); }); }
            if (transactionForm) transactionForm.addEventListener('submit', handleTransactionSubmit);
            if (profileSettingsForm) profileSettingsForm.addEventListener('submit', handleProfileUpdate);
            if (passwordChangeForm) passwordChangeForm.addEventListener('submit', handleChangePassword);
            if (clearAllDataBtn) clearAllDataBtn.addEventListener('click', handleClearAllData);

            // --- Transaction Handling ---
            function handleTransactionSubmit(e) { e.preventDefault(); const title = document.getElementById('transactionTitle').value.trim(); const amount = parseFloat(document.getElementById('transactionAmount').value); const type = document.querySelector('input[name="transactionType"]:checked').value; const category = document.getElementById('transactionCategory').value; const date = document.getElementById('transactionDate').value; const idToEdit = parseInt(editTransactionIdInput.value, 10); if (!title || isNaN(amount) || amount <= 0 || !category || !date) { alert("Fill details correctly."); return; } if (idToEdit) { const idx = allTransactions.findIndex(t => t.id === idToEdit); if (idx > -1) { allTransactions[idx] = { ...allTransactions[idx], title, amount, type, category, date }; } else { alert('Error updating.'); closeModal(transactionModal); return; } } else { const newTx = { id: Date.now(), title, amount, type, category, date }; allTransactions.push(newTx); } updateAllDashboardUI(); saveTransactions(); closeModal(transactionModal); }
            function handleDeleteTransaction(id) { if (!confirm('Delete transaction?')) return; const txId = parseInt(id, 10); allTransactions = allTransactions.filter(t => t.id !== txId); updateAllDashboardUI(); saveTransactions(); alert('Deleted.'); }
            function handleEditTransaction(id) { const txId = parseInt(id, 10); const tx = allTransactions.find(t => t.id === txId); if (!tx) { alert('Transaction not found.'); return; } transactionModalTitle.textContent = 'Edit Transaction'; transactionSubmitBtn.textContent = 'Update Transaction'; editTransactionIdInput.value = tx.id; editingTransactionId = tx.id; document.getElementById('transactionTitle').value = tx.title; document.getElementById('transactionAmount').value = tx.amount; document.querySelector(`input[name="transactionType"][value="${tx.type}"]`).checked = true; document.getElementById('transactionCategory').value = tx.category; document.getElementById('transactionDate').value = tx.date; openModal(transactionModal); }

            // --- Rendering Transaction Lists ---
            function renderRecentTransactions() { if (!transactionsListContainer || !noTransactionsMessage) return; transactionsListContainer.innerHTML = ''; const recent = [...allTransactions].sort((a, b) => new Date(b.date) - new Date(a.date)).slice(0, 10); if (recent.length === 0) { noTransactionsMessage.style.display = 'block'; } else { noTransactionsMessage.style.display = 'none'; recent.forEach(tx => { transactionsListContainer.appendChild(createTransactionListItem(tx, false)); }); } }
            function renderBudgetTransactions(txs) { if (!budgetTransactionsListContainer || !noBudgetTransactionsMessage) return; budgetTransactionsListContainer.innerHTML = ''; budgetTransactionsListContainer.removeEventListener('click', handleBudgetListActions); budgetTransactionsListContainer.addEventListener('click', handleBudgetListActions); if (txs.length === 0) { noBudgetTransactionsMessage.style.display = 'block'; } else { noBudgetTransactionsMessage.style.display = 'none'; txs.sort((a, b) => new Date(b.date) - new Date(a.date)); txs.forEach(tx => { budgetTransactionsListContainer.appendChild(createTransactionListItem(tx, true)); }); } }
            function createTransactionListItem(tx, includeActions = false) { const item = document.createElement('div'); item.classList.add('transaction-item'); item.dataset.id = tx.id; const icon = getIconForCategory(tx.category); const amtClass = tx.type === 'income' ? 'positive' : 'negative'; const prefix = tx.type === 'income' ? '+' : '-'; const fmtAmt = formatINR(tx.amount); const dateOpts = includeActions ? { day: 'numeric', month: 'short', year: 'numeric' } : { day: 'numeric', month: 'short' }; let fmtDate = 'Invalid Date'; try { const dt = new Date(tx.date + 'T00:00:00'); if (!isNaN(dt)) fmtDate = dt.toLocaleDateString('en-GB', dateOpts); } catch (e) {} item.innerHTML = `<div class="transaction-icon"><i class="fas ${icon}"></i></div> <div class="transaction-details"><h4>${tx.title}</h4><p>${fmtDate} - ${capitalizeFirstLetter(tx.category)}</p></div> <div class="transaction-amount ${amtClass}">${prefix}${fmtAmt.substring(1)}</div> ${includeActions ? `<div class="transaction-actions"><button class="action-btn edit-btn" title="Edit" data-id="${tx.id}"><i class="fas fa-pencil-alt"></i></button><button class="action-btn delete-btn" title="Delete" data-id="${tx.id}"><i class="fas fa-trash-alt"></i></button></div>` : ''}`; return item; }
            function handleBudgetListActions(event) { const btn = event.target.closest('.action-btn'); if (!btn) return; const txId = btn.dataset.id; if (btn.classList.contains('edit-btn')) handleEditTransaction(txId); else if (btn.classList.contains('delete-btn')) handleDeleteTransaction(txId); }

            // --- Dashboard Summaries & UI Updates ---
            function updateDashboardSummaries() { let inc = 0, exp = 0; allTransactions.forEach(t => { const amt = Number(t.amount); if (!isNaN(amt)) { if (t.type === 'income') inc += amt; else exp += amt; } }); const bal = inc - exp; if (totalIncomeValueEl) totalIncomeValueEl.textContent = formatINR(inc); if (totalExpenseValueEl) totalExpenseValueEl.textContent = formatINR(exp); if (currentBalanceValueEl) currentBalanceValueEl.textContent = formatINR(bal); if (netFlowValueEl) netFlowValueEl.textContent = formatINR(bal); }
            function updateExpenseCategoriesDisplay() { const body = document.getElementById('expenseCategoriesBody'); if (!body) return; const exps = allTransactions.filter(t => t.type === 'expense'); if (exps.length === 0) { body.innerHTML = '<p class="no-data">No expense data yet.</p>'; return; } const summary = exps.reduce((acc, t) => { const amt = Number(t.amount); if (!isNaN(amt)) { acc[t.category] = (acc[t.category] || 0) + amt; } return acc; }, {}); let content = '<ul style="list-style: none; padding: 0; width: 100%;">'; Object.entries(summary).sort(([, a], [, b]) => b - a).slice(0, 5).forEach(([cat, amt]) => { content += `<li style="display: flex; justify-content: space-between; padding: 0.3rem 0; border-bottom: 1px solid #eee;"><span>${capitalizeFirstLetter(cat)}</span><strong>${formatINR(amt)}</strong></li>`; }); if (Object.keys(summary).length > 5) { content += `<li style="text-align: center; padding-top: 0.5rem; font-size: 0.8rem; color: var(--neutral-color);">... and more</li>`; } content += '</ul>'; body.innerHTML = content; }
            function generateAndDownloadReport() { const exps = allTransactions.filter(t => t.type === 'expense'); if (exps.length === 0) { alert("No expense data."); return; } const headers = ["Date", "Title", "Category", "Amount(INR)"]; const rows = [headers.join(",")]; exps.sort((a, b) => new Date(a.date) - new Date(b.date)).forEach(t => { const amt = Number(t.amount); const row = [t.date, escapeCSV(t.title), escapeCSV(capitalizeFirstLetter(t.category)), isNaN(amt) ? '0.00' : amt.toFixed(2)]; rows.push(row.join(",")); }); const str = rows.join("\n"); const blob = new Blob([str], { type: 'text/csv;charset=utf-8;' }); const link = document.createElement("a"); if (link.download !== undefined) { const url = URL.createObjectURL(blob); link.setAttribute("href", url); link.setAttribute("download", `expenzo-report-${new Date().toISOString().split('T')[0]}.csv`); link.style.visibility = 'hidden'; document.body.appendChild(link); link.click(); document.body.removeChild(link); URL.revokeObjectURL(url); } else { alert("Download not supported."); } }

            // --- Dashboard Sub-View Navigation ---
            function setActiveMenuItem(activeItem) { sidebarMenuItems.forEach(item => item.classList.remove('active')); if (activeItem) activeItem.classList.add('active'); }
            function showDashboardSubView(viewId) {
                const sections = [dashboardOverview, transactionsSection, reportsSection, budgetsSection, settingsSection, proSection];
                let activeItem = null; currentView = viewId;
                sections.forEach(section => { if (section) { const isVisible = section.id === viewId; section.classList.toggle('visible-section', isVisible); section.classList.toggle('hidden-section', !isVisible); } });
                switch (viewId) {
                    case 'dashboardOverview': activeItem = dashboardMenuItem; updateIncomeExpenseChart(); updateExpenseCategoriesDisplay(); break;
                    case 'transactionsSection': activeItem = transactionsMenuItem; renderRecentTransactions(); break;
                    case 'budgetsSection': activeItem = budgetsMenuItem; updateBudgetSection(); break;
                    case 'reportsSection': activeItem = reportsMenuItem; break;
                    case 'expenzo-pro': activeItem = proMenuItem; initializeProAccordion(); break; // Ensure accordion initializes when shown
                    case 'settingsSection': activeItem = settingsMenuItem; if (settingsNameInput) settingsNameInput.value = currentUserName; if (passwordChangeForm) passwordChangeForm.reset(); break;
                    default: activeItem = dashboardMenuItem; viewId = 'dashboardOverview'; currentView = 'dashboardOverview'; if (dashboardOverview) { dashboardOverview.classList.add('visible-section'); dashboardOverview.classList.remove('hidden-section'); } updateIncomeExpenseChart(); updateExpenseCategoriesDisplay();
                }
                setActiveMenuItem(activeItem);
            }
            if (dashboardMenuItem) dashboardMenuItem.addEventListener('click', () => showDashboardSubView('dashboardOverview'));
            if (transactionsMenuItem) transactionsMenuItem.addEventListener('click', () => showDashboardSubView('transactionsSection'));
            if (reportsMenuItem) reportsMenuItem.addEventListener('click', () => showDashboardSubView('reportsSection'));
            if (budgetsMenuItem) budgetsMenuItem.addEventListener('click', () => showDashboardSubView('budgetsSection'));
            if (proMenuItem) proMenuItem.addEventListener('click', () => showDashboardSubView('expenzo-pro'));
            if (settingsMenuItem) settingsMenuItem.addEventListener('click', () => showDashboardSubView('settingsSection'));

            // --- Header Scroll Effect ---
            if (header) { window.addEventListener('scroll', () => { header.style.boxShadow = window.scrollY > 50 ? '0 5px 20px rgba(0,0,0,0.1)' : '0 2px 10px rgba(0,0,0,0.1)'; header.style.padding = window.scrollY > 50 ? '1rem 0' : '1.5rem 0'; }); }

            // --- Chart Initialization & Update ---
            function initializeIncomeExpenseChart() { const el = document.getElementById('incomeExpenseChart'); if (!el || typeof Chart === 'undefined') return; const ctx = el.getContext('2d'); if (incomeExpenseChartInstance) incomeExpenseChartInstance.destroy(); incomeExpenseChartInstance = new Chart(ctx, { type: 'bar', data: { labels: [], datasets: [{ label: 'Income', data: [], backgroundColor: 'rgba(16, 185, 129, 0.8)', borderColor: 'rgba(16, 185, 129, 1)', borderWidth: 1, borderRadius: 6 }, { label: 'Expense', data: [], backgroundColor: 'rgba(239, 68, 68, 0.8)', borderColor: 'rgba(239, 68, 68, 1)', borderWidth: 1, borderRadius: 6 }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false }, tooltip: { callbacks: { label: ctx => `${ctx.dataset.label}: ${formatINR(ctx.parsed.y)}` } } }, scales: { x: { grid: { display: false }, ticks: { color: '#6b7280' } }, y: { beginAtZero: true, grid: { color: '#e5e7eb' }, ticks: { callback: val => formatINR(val), color: '#6b7280' } } } } }); updateIncomeExpenseChart(); }
            function updateIncomeExpenseChart() { if (!incomeExpenseChartInstance) return; const months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]; const monthly = {}; const sixMo = new Date(); sixMo.setMonth(sixMo.getMonth() - 5); sixMo.setDate(1); sixMo.setHours(0, 0, 0, 0); allTransactions.forEach(t => { try { const txDate = new Date(t.date + 'T00:00:00'); if (isNaN(txDate.getTime())) return; if (txDate >= sixMo) { const y = txDate.getFullYear(), m = txDate.getMonth(), key = `${y}-${String(m + 1).padStart(2, '0')}`; const amt = Number(t.amount); if (!isNaN(amt)) { if (!monthly[key]) monthly[key] = { inc: 0, exp: 0, mIdx: m, yr: y }; if (t.type === 'income') monthly[key].inc += amt; else monthly[key].exp += amt; } } } catch(e) {} }); const final = {}; let curr = new Date(sixMo); for (let i = 0; i < 6; i++) { const y = curr.getFullYear(), m = curr.getMonth(), key = `${y}-${String(m + 1).padStart(2, '0')}`; final[key] = monthly[key] || { inc: 0, exp: 0, mIdx: m, yr: y }; curr.setMonth(curr.getMonth() + 1); } const keys = Object.keys(final).sort(); const labels = keys.map(k => months[final[k].mIdx]); const incData = keys.map(k => final[k].inc); const expData = keys.map(k => final[k].exp); incomeExpenseChartInstance.data.labels = labels; incomeExpenseChartInstance.data.datasets[0].data = incData; incomeExpenseChartInstance.data.datasets[1].data = expData; incomeExpenseChartInstance.update(); }
            function initializeBudgetTrendChart() { const el = document.getElementById('budgetTrendChart'); if (!el || typeof Chart === 'undefined') return; const ctx = el.getContext('2d'); if (budgetTrendChartInstance) budgetTrendChartInstance.destroy(); budgetTrendChartInstance = new Chart(ctx, { type: 'line', data: { labels: [], datasets: [{ label: 'Income', data: [], borderColor: 'rgba(16, 185, 129, 1)', backgroundColor: 'rgba(16, 185, 129, 0.1)', tension: 0.3, fill: true }, { label: 'Expense', data: [], borderColor: 'rgba(239, 68, 68, 1)', backgroundColor: 'rgba(239, 68, 68, 0.1)', tension: 0.3, fill: true }] }, options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false }, tooltip: { callbacks: { label: ctx => `${ctx.dataset.label}: ${formatINR(ctx.parsed.y)}` } } }, scales: { x: { grid: { display: false }, ticks: { color: '#6b7280'} }, y: { beginAtZero: true, grid: { color: '#e5e7eb' }, ticks: { callback: val => formatINR(val), color: '#6b7280' } } } } }); }
            function updateBudgetTrendChart(txs, period) { if (!budgetTrendChartInstance || !txs) return; const { labels, incomeData, expenseData } = aggregateDataForChart(txs, period); const hasData = labels.length > 0 && (incomeData.some(d => d > 0) || expenseData.some(d => d > 0)); if (budgetTrendChartCanvas) budgetTrendChartCanvas.style.display = hasData ? 'block' : 'none'; if (noBudgetDataForChartMessage) noBudgetDataForChartMessage.style.display = hasData ? 'none' : 'block'; budgetTrendChartInstance.data.labels = labels; budgetTrendChartInstance.data.datasets[0].data = incomeData; budgetTrendChartInstance.data.datasets[1].data = expenseData; budgetTrendChartInstance.update(); }
            function aggregateDataForChart(txs, period) { const agg = {}; const lbls = [], inc = [], exp = []; let getKey, getDate, sort, lblFmt; switch (period) { case 'today': case 'this_week': case 'this_month': getKey = d => d.toISOString().split('T')[0]; getDate = k => new Date(k + 'T00:00:00Z'); sort = (a, b) => getDate(a) - getDate(b); lblFmt = { day: 'numeric', month: 'short' }; break; case 'this_year': case 'all': default: getKey = d => `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}`; getDate = k => { const [y, m] = k.split('-'); return new Date(Date.UTC(y, m - 1, 1)); }; sort = (a, b) => getDate(a) - getDate(b); lblFmt = { month: 'short', year: 'numeric' }; break; } txs.forEach(t => { try { const dt = new Date(t.date + 'T00:00:00'); if (isNaN(dt.getTime())) return; const key = getKey(dt); const amt = Number(t.amount); if (!isNaN(amt)) { if (!agg[key]) agg[key] = { inc: 0, exp: 0 }; if (t.type === 'income') agg[key].inc += amt; else agg[key].exp += amt; } } catch (e) {} }); const keys = Object.keys(agg).sort(sort); keys.forEach(k => { try { const dt = getDate(k); if (isNaN(dt.getTime())) return; lbls.push(dt.toLocaleDateString('en-GB', lblFmt)); inc.push(agg[k].inc); exp.push(agg[k].exp); } catch (e) {} }); return { labels: lbls, incomeData: inc, expenseData: exp }; }

            // --- Budget Section Logic ---
            function filterTransactionsByPeriod(period) { const now = new Date(), y = now.getFullYear(), m = now.getMonth(), d = now.getDate(); let startUTC, endUTC; switch (period) { case 'today': startUTC = Date.UTC(y, m, d); endUTC = Date.UTC(y, m, d + 1); break; case 'this_week': const dayW = now.getDay(), offset = dayW === 0 ? -6 : 1 - dayW, startD = d + offset; startUTC = Date.UTC(y, m, startD); endUTC = Date.UTC(y, m, startD + 7); break; case 'this_month': startUTC = Date.UTC(y, m, 1); endUTC = Date.UTC(y, m + 1, 1); break; case 'this_year': startUTC = Date.UTC(y, 0, 1); endUTC = Date.UTC(y + 1, 0, 1); break; case 'all': default: return [...allTransactions]; } return allTransactions.filter(t => { try { const parts = t.date.split('-'); if (parts.length !== 3) return false; const txY = parseInt(parts[0]), txM = parseInt(parts[1]) - 1, txD = parseInt(parts[2]); if (isNaN(txY) || isNaN(txM) || isNaN(txD)) return false; const txUTC = Date.UTC(txY, txM, txD); if (isNaN(txUTC)) return false; return txUTC >= startUTC && txUTC < endUTC; } catch (e) { return false; } }); }
            function updateBudgetSection() { if (!budgetPeriodFilter) return; const period = budgetPeriodFilter.value; const txs = filterTransactionsByPeriod(period); renderBudgetTransactions(txs); updateBudgetTrendChart(txs, period); }

            // --- Settings Handlers ---
            function handleProfileUpdate(e) { e.preventDefault(); const newName = settingsNameInput.value.trim(); if (!newName) { alert("Name required."); return; } updateUserProfileDisplay(newName, currentUserEmail); alert('Profile updated!'); }
            function handleChangePassword(e) { e.preventDefault(); const cur = currentPasswordInput.value, nw = newPasswordInput.value, cnf = confirmNewPasswordInput.value; if (!cur || !nw || !cnf) { alert("Fill all password fields."); return; } if (nw.length < 8) { alert("New password too short."); return; } if (nw !== cnf) { alert("Passwords don't match."); return; } alert("Password change simulated!"); passwordChangeForm.reset(); }
            function handleClearAllData() { if (confirm('DANGER! Delete ALL transaction data? Cannot be undone.') && confirm('Final confirmation: Delete all data?')) { allTransactions = []; saveTransactions(); updateAllDashboardUI(); alert('All data cleared.'); } }

            // --- Consolidated UI Update ---
            function updateAllDashboardUI() { updateDashboardSummaries(); renderRecentTransactions(); updateBudgetSection(); updateIncomeExpenseChart(); updateExpenseCategoriesDisplay(); }

            // --- Initial Setup ---
            function initializeAppDashboard() { if (typeof Chart !== 'undefined') { initializeIncomeExpenseChart(); initializeBudgetTrendChart(); } else { console.error("Chart.js missing."); } updateAllDashboardUI(); if (settingsNameInput) settingsNameInput.value = currentUserName; showDashboardSubView(currentView); }
            function initializeApp() { if (transactionDateInput) { try { transactionDateInput.value = new Date().toISOString().split('T')[0]; } catch (e) {} } loadUserData(); loadTransactions(); updateUserProfileDisplay(currentUserName, currentUserEmail); const isLoggedIn = localStorage.getItem('expenzoUserLoggedIn') === 'true'; if (isLoggedIn) { authButtons.style.display = 'none'; userProfile.style.display = 'flex'; showPage('dashboard'); initializeAppDashboard(); } else { authButtons.style.display = 'flex'; userProfile.style.display = 'none'; showPage('home'); } }

            // --- Data Persistence ---
            function loadTransactions() { const stored = localStorage.getItem('expenzoTransactions'); if (stored) { try { allTransactions = JSON.parse(stored).map(t => ({ ...t, id: Number(t.id), amount: Number(t.amount) || 0 })); } catch (e) { allTransactions = []; localStorage.removeItem('expenzoTransactions'); } } else { allTransactions = []; /* addDemoData(); */ } }
            function saveTransactions() { try { localStorage.setItem('expenzoTransactions', JSON.stringify(allTransactions)); } catch (e) { console.error("Save error:", e); } }
            function loadUserData() { currentUserName = localStorage.getItem('expenzoUserName') || 'John Doe'; currentUserEmail = localStorage.getItem('expenzoUserEmail') || ''; }
            function saveUserData() { try { localStorage.setItem('expenzoUserName', currentUserName); localStorage.setItem('expenzoUserEmail', currentUserEmail); } catch (e) {} }
            window.addEventListener('beforeunload', () => { saveTransactions(); saveUserData(); });

            // --- DEMO DATA ---
            function addDemoData() { /* ... */ }

            // --- Pro Section Accordion JS ---
            function initializeProAccordion() {
                 const proSectionElement = document.getElementById('expenzo-pro');
                 if (!proSectionElement) return;
                 proSectionElement.querySelectorAll('.accordion-header').forEach(header => {
                    header.addEventListener('click', () => {
                        const item = header.parentElement; const isActive = item.classList.contains('active'); const content = header.nextElementSibling;
                        proSectionElement.querySelectorAll('.accordion-item').forEach(i => { if (i !== item) { i.classList.remove('active'); i.querySelector('.accordion-content').style.maxHeight = null; i.querySelector('.accordion-header span:last-child').textContent = '+'; } });
                        if (!isActive) { item.classList.add('active'); content.style.maxHeight = content.scrollHeight + "px"; header.querySelector('span:last-child').textContent = '-'; }
                        else { item.classList.remove('active'); content.style.maxHeight = null; header.querySelector('span:last-child').textContent = '+'; }
                    });
                });
                 const firstItem = proSectionElement.querySelector('.accordion-item');
                 if(firstItem && !firstItem.classList.contains('active')){ // Only open if not already open
                    firstItem.classList.add('active'); firstItem.querySelector('.accordion-header span:last-child').textContent = '-'; const firstContent = firstItem.querySelector('.accordion-content'); firstContent.style.maxHeight = firstContent.scrollHeight + "px";
                 }
            }
            // Initialize accordion when the script loads (it might be hidden initially)
            initializeProAccordion();

            // Run the initialization
            initializeApp();

        }); // End DOMContentLoaded
    </script>
</body>
</html>
```